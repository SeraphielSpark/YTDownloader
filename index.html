<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prime YT Downloader</title>
    <style>
:root {
  --primary: #ff0000;
  --primary-dark: #cc0000;
  --secondary: #282828;
  --light: #f9f9f9;
  --dark: #222;
  --gray: #666;
  --light-gray: #e0e0e0;
  --border-radius: 8px;
  --box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  --transition: all 0.3s ease;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', sans-serif;
}

body {
  background-color: var(--light);
  color: var(--dark);
  min-height: 100vh;
  line-height: 1.5;
}

/* Header Styles */
header {
  height: 70px;
  width: 100%;
  background-color: var(--secondary);
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0 1.5rem;
  box-shadow: var(--box-shadow);
  position: sticky;
  top: 0;
  z-index: 100;
}

.logo {
  color: white;
  font-size: 1.5rem;
  font-weight: bold;
  white-space: nowrap;
}

.logo span {
  color: var(--primary);
}

nav ul {
  display: flex;
  list-style: none;
  gap: 1rem;
}

nav a {
  color: white;
  text-decoration: none;
  font-weight: 500;
  transition: var(--transition);
  font-size: 0.9rem;
}

nav a:hover {
  color: var(--primary);
}

/* Main Content Styles */
main {
  max-width: 1000px;
  margin: 2rem auto;
  padding: 0 1rem;
  text-align: center;
}

.hero {
  margin-bottom: 2rem;
  padding: 1rem;
}

.hero img {
  height: 120px;
  margin-bottom: 1rem;
  object-fit: contain;
}

.hero h1 {
  font-size: 1.8rem;
  margin-bottom: 0.5rem;
  color: var(--dark);
}

.hero p {
  color: var(--gray);
  font-size: 1.1rem;
  max-width: 600px;
  margin: 0 auto;
}

/* Search Box Styles */
.search-box {
  display: flex;
  margin: 2rem auto;
  border: 2px solid var(--primary);
  border-radius: var(--border-radius);
  overflow: hidden;
  max-width: 600px;
  width: 100%;
  background: white;
}

.search-box input {
  flex: 1;
  padding: 1rem;
  border: none;
  outline: none;
  font-size: 1rem;
  min-width: 0; /* Fix for flexbox overflow */
}

.search-box button {
  background-color: var(--primary);
  color: white;
  border: none;
  padding: 0 1.5rem;
  cursor: pointer;
  transition: var(--transition);
  font-weight: 600;
  white-space: nowrap;
}

.search-box button:hover {
  background-color: var(--primary-dark);
}

/* Preview Section Styles */
.preview-section {
  display: none;
  background: white;
  border-radius: var(--border-radius);
  padding: 1.5rem;
  box-shadow: var(--box-shadow);
  margin-top: 2rem;
  text-align: left;
  width: 100%;
}

.preview-card {
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
}

.thumbnail-container {
  display: flex;
  gap: 1.5rem;
  align-items: flex-start;
  flex-wrap: wrap;
}

.thumbnail {
  width: 100%;
  max-width: 320px;
  height: auto;
  aspect-ratio: 16/9;
  border-radius: var(--border-radius);
  object-fit: cover;
  flex-shrink: 0;
}

.video-info {
  flex: 1;
  min-width: 200px;
}

.video-info h3 {
  margin-bottom: 0.5rem;
  font-size: 1.2rem;
  word-break: break-word;
}

.video-meta {
  color: var(--gray);
  font-size: 0.9rem;
}

/* Options Styles */
.options {
  display: flex;
  flex-direction: column;
  gap: 1.2rem;
  margin-top: 1rem;
}

select {
  padding: 0.8rem;
  border: 1px solid var(--light-gray);
  border-radius: var(--border-radius);
  font-size: 1rem;
  background-color: white;
  width: 100%;
  transition: var(--transition);
}

select:focus {
  border-color: var(--primary);
  outline: none;
}

label {
  font-weight: 600;
  margin-bottom: -0.8rem;
  font-size: 0.95rem;
}

/* Progress Styles */
.progress-container {
  margin: 1.5rem 0;
  display: none;
  width: 100%;
}

.progress-wrap {
  width: 100%;
  background-color: #f0f0f0;
  border-radius: 10px;
  height: 10px;
  overflow: hidden;
}

.progress-bar {
  height: 100%;
  background-color: var(--primary);
  width: 0%;
  transition: width 0.3s ease-out;
}

.status {
  margin-top: 0.5rem;
  font-size: 0.9rem;
  color: var(--gray);
  text-align: center;
}

/* Button Styles */
.btn {
  background-color: var(--primary);
  color: white;
  border: none;
  padding: 1rem;
  border-radius: var(--border-radius);
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: var(--transition);
  width: 100%;
}

.btn:hover {
  background-color: var(--primary-dark);
  transform: translateY(-2px);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

.btn:active {
  transform: translateY(0);
}

.btn:disabled {
  background-color: #ccc;
  cursor: not-allowed;
  transform: none;
  box-shadow: none;
}

/* Loading Spinner */
.loading {
  display: none;
  justify-content: center;
  margin: 2rem 0;
}

.spinner {
  width: 50px;
  height: 50px;
  border: 5px solid rgba(255, 0, 0, 0.1);
  border-radius: 50%;
  border-top-color: var(--primary);
  animation: spin 1s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

/* Mobile Responsive Styles */
@media (max-width: 768px) {
  header {
    padding: 0 1rem;
    height: 60px;
  }
  
  .logo {
    font-size: 1.3rem;
  }
  
  nav ul {
    gap: 0.7rem;
  }
  
  nav a {
    font-size: 0.8rem;
  }
  
  .hero img {
    height: 100px;
  }
  
  .hero h1 {
    font-size: 1.5rem;
  }
  
  .hero p {
    font-size: 1rem;
  }
  
  .search-box {
    margin: 1.5rem auto;
  }
  
  .search-box input {
    padding: 0.8rem;
    font-size: 0.9rem;
  }
  
  .search-box button {
    padding: 0 1rem;
    font-size: 0.9rem;
  }
  
  .preview-section {
    padding: 1rem;
  }
  
  .thumbnail-container {
    gap: 1rem;
    flex-direction: column;
  }
  
  .thumbnail {
    max-width: 100%;
  }
  
  .options {
    gap: 1rem;
  }
  
  select {
    padding: 0.7rem;
  }
  
  .btn {
    padding: 0.8rem;
  }
}

/* Small Mobile Devices */
@media (max-width: 480px) {
  header {
    flex-direction: column;
    height: auto;
    padding: 0.5rem;
  }
  
  .logo {
    margin-bottom: 0.5rem;
  }
  
  nav ul {
    flex-wrap: wrap;
    justify-content: center;
  }
  
  .hero img {
    height: 80px;
  }
  
  .hero h1 {
    font-size: 1.3rem;
  }
  
  .search-box {
    flex-direction: column;
    border-radius: var(--border-radius);
  }
  
  .search-box input {
    border-bottom: 1px solid var(--light-gray);
    border-radius: var(--border-radius) var(--border-radius) 0 0;
  }
  
  .search-box button {
    padding: 0.8rem;
    border-radius: 0 0 var(--border-radius) var(--border-radius);
  }
  
  .preview-section {
    padding: 0.8rem;
  }
}  
</style>
</head>
<body>
    <header>
        <div class="logo">Prime<span>YT</span> Downloader</div>
        <nav>
            <ul>
                <li><a href="#">Home</a></li>
                <li><a href="#">About</a></li>
                <li><a href="#">Contact</a></li>
            </ul>
        </nav>
    </header>
    
    <main>
        <div class="hero">
            <img src="https://cdn-icons-png.flaticon.com/512/1384/1384060.png" alt="YouTube Logo">
            <h1>Download YouTube Videos & Music</h1>
            <p>Fast, free and easy to use YouTube downloader</p>
        </div>
        
        <div class="search-box">
            <input type="text" id="videoURL" placeholder="Paste YouTube link here...">
            <button id="fetchBtn">Search</button>
        </div>
        
        <div class="loading" id="loading">
            <div class="spinner"></div>
        </div>
        
        <div class="preview-section" id="preview-section">
            <div class="preview-card">
                <div class="thumbnail-container">
                    <img id="thumbnail" class="thumbnail" src="" alt="Video thumbnail">
                    <div class="video-info">
                        <h3 id="video-title"></h3>
                        <div class="video-meta" id="video-meta"></div>
                    </div>
                </div>
                
                <div class="options">
                    <label for="format-select">Select Format:</label>
                    <select id="format-select"></select>
                    
                    <label for="type-select">Save As:</label>
                    <select id="type-select">
                        <option value="video">Video (MP4)</option>
                        <option value="mp3">Audio (MP3)</option>
                    </select>
                    
                    <div class="progress-container" id="progress-container">
                        <div class="progress-wrap">
                            <div class="progress-bar" id="progress-bar"></div>
                        </div>
                        <div class="status" id="status"></div>
                    </div>
                    
                    <button class="btn" id="downloadBtn">Download</button>
                </div>
            </div>
        </div>
    </main>

   <script>
    const API_BASE = 'https://ytdownloader-1-4919.onrender.com';

    const fetchBtn = document.getElementById('fetchBtn');
    const urlInput = document.getElementById('videoURL');
    const previewSection = document.getElementById('preview-section');
    const thumbnail = document.getElementById('thumbnail');
    const titleEl = document.getElementById('video-title');
    const metaEl = document.getElementById('video-meta');
    const formatSelect = document.getElementById('format-select');
    const typeSelect = document.getElementById('type-select');
    const downloadBtn = document.getElementById('downloadBtn');
    const progressContainer = document.getElementById('progress-container');
    const progressBar = document.getElementById('progress-bar');
    const statusEl = document.getElementById('status');
    const loadingEl = document.getElementById('loading');

    fetchBtn.addEventListener('click', fetchVideoInfo);
    urlInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') fetchVideoInfo();
    });

    async function fetchVideoInfo() {
        const url = urlInput.value.trim();
        if (!url) return alert('Please enter a YouTube URL');

        try {
            showLoading();
            previewSection.style.display = 'none';

            const response = await fetch(`${API_BASE}/get-info?url=${encodeURIComponent(url)}`);
            if (!response.ok) {
                const error = await response.json().catch(() => null);
                throw new Error(error?.error || 'Failed to fetch video info');
            }

            const data = await response.json();
            displayVideoInfo(data);
        } catch (error) {
            console.error('Error:', error);
            alert('Error: ' + (error.message || 'Failed to fetch video info'));
        } finally {
            hideLoading();
        }
    }

    function displayVideoInfo(data) {
        thumbnail.src = data.thumbnail || '';
        titleEl.textContent = data.title || 'No title available';

        const minutes = Math.floor(data.lengthSeconds / 60);
        const seconds = data.lengthSeconds % 60;
        metaEl.textContent = `${data.author || 'Unknown author'} • ${minutes}:${seconds.toString().padStart(2, '0')}`;

        formatSelect.innerHTML = '';
        data.formats.forEach(format => {
            const option = document.createElement('option');
            option.value = format.itag;

            let label = '';
            if (format.hasVideo && format.hasAudio) {
                label = `Video+Audio (${format.qualityLabel || 'Unknown'})`;
            } else if (format.hasVideo) {
                label = `Video Only (${format.qualityLabel || 'Unknown'})`;
            } else if (format.hasAudio) {
                label = `Audio Only (${format.bitrate ? format.bitrate + 'kbps' : 'Unknown'})`;
            }

            option.textContent = `${label} - ${format.container || 'Unknown'}`;
            formatSelect.appendChild(option);
        });

        previewSection.style.display = 'block';
        progressContainer.style.display = 'none';
        statusEl.textContent = '';
        progressBar.style.width = '0%';
    }

    downloadBtn.addEventListener('click', startDownload);
    function startDownload() {
        const url = urlInput.value.trim();
        if (!url) return alert('Please enter a YouTube URL');

        const itag = formatSelect.value;
        if (!itag) return alert('Please select a format');

        const type = typeSelect.value;

        downloadBtn.disabled = true;
        progressContainer.style.display = 'block';
        statusEl.textContent = 'Preparing download...';

        const xhr = new XMLHttpRequest();
        xhr.open('GET', `${API_BASE}/download?url=${encodeURIComponent(url)}&itag=${encodeURIComponent(itag)}&type=${encodeURIComponent(type)}`, true);
        xhr.responseType = 'blob';

        xhr.onprogress = (e) => {
            if (e.lengthComputable) {
                const percent = Math.round((e.loaded / e.total) * 100);
                progressBar.style.width = `${percent}%`;
                statusEl.textContent = `Downloading... ${percent}%`;
            } else {
                statusEl.textContent = `Downloaded ${(e.loaded / (1024 * 1024)).toFixed(2)} MB`;
            }
        };

        xhr.onload = function () {
            if (this.status === 200) {
                const blob = this.response;
                const contentDisposition = xhr.getResponseHeader('Content-Disposition');
                let filename = 'video.mp4';

                if (contentDisposition) {
                    const filenameMatch = contentDisposition.match(/filename="?(.+)"?/);
                    if (filenameMatch && filenameMatch[1]) {
                        filename = filenameMatch[1];
                    }
                }

                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.style.display = 'none';
                a.href = url;
                a.download = filename;
                document.body.appendChild(a);
                a.click();
                window.URL.revokeObjectURL(url);
                document.body.removeChild(a);

                statusEl.textContent = 'Download complete!';
            } else {
                alert(`Download failed: ${xhr.statusText}`);
                statusEl.textContent = 'Download failed';
            }
            downloadBtn.disabled = false;
        };

        xhr.onerror = function () {
            alert('Download error occurred');
            statusEl.textContent = 'Error during download';
            downloadBtn.disabled = false;
            progressBar.style.width = '0%';
        };

        xhr.send();
    }

    function showLoading() {
        loadingEl.style.display = 'flex';
    }

    function hideLoading() {
        loadingEl.style.display = 'none';
    }
</script>


</body>

</html>


